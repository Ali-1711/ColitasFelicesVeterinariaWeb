<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">

<head>
  <meta charset="UTF-8" />
  <title>Cl铆nica y Veterinaria Colitas Felices</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

</head>

<body class="bg-gray-100 min-h-screen">
  <!-- Header -->
  <header
    class="h-16 bg-green-900 text-white py-4 px-6 flex justify-between items-center w-full fixed top-0 z-20 shadow-lg">
    <div class="flex items-center gap-4">
      <button onclick="toggleSidebar()" class="md:hidden text-white focus:outline-none">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16" />
        </svg>
      </button>
      <h1 class="text-xl font-bold">Cl铆nica Veterinaria Puente Blanco</h1>
    </div>
  </header>
  <!-- BARRITA SIDE -->
  <div class="flex w-full min-h-screen">
    <aside id="sidebar" class="fixed top-[64px] md:top-16 left-0 w-64 h-screen bg-gray-800 text-white flex flex-col justify-between z-20
              transform md:translate-x-0 -translate-x-full transition-transform duration-300 ease-in-out">
      <div>
        <nav class="flex flex-col p-4 space-y-4">
          <!-- Dashboard -->
          <a th:href="@{/dashboard}" class="flex items-center gap-3 text-green-400 bg-gray-700 p-2 rounded">
            <i class="fa-solid fa-table-columns"></i>
            Dashboard
          </a>

          <!-- Agendar Cita -->
          <a th:href="@{/book-appointment}" class="flex items-center gap-3 p-2 rounded hover:bg-gray-700">
            <i class="fa-solid fa-calendar-days"></i>
            Agendar Cita
          </a>

          <!-- Ver Citas -->
          <a th:href="@{/appointments}" class="flex items-center gap-3 p-2 rounded hover:bg-gray-700"><i
              class="fa-solid fa-clock"></i>
            Ver Citas
          </a>

          <!-- Cancelar Cita -->
          <a th:href="@{/cancel-appointment}" class="flex items-center gap-3 p-2 rounded hover:bg-gray-700"><i
              class="fa-solid fa-calendar-xmark"></i>
            Cancelar Cita
          </a>

          <!-- Veterinarios -->
          <a th:href="@{/veterinarians}" class="flex items-center gap-3 p-2 rounded hover:bg-gray-700"><i
              class="fa-solid fa-stethoscope"></i>
            Veterinarios
          </a>

          <!-- Vacunaci贸n -->
          <a th:href="@{/vaccination}" class="flex items-center gap-3 p-2 rounded hover:bg-gray-700">
            <i class="fa-solid fa-syringe"></i>
            Vacunaci贸n
          </a>
          <!-- Bot贸n de cierre de sesi贸n -->
          <button onclick="logout()"
            class="m-4 flex items-center justify-center gap-2 bg-gray-100 text-red-500 px-4 py-2 rounded hover:bg-gray-200">
            <i class="fa-solid fa-arrow-right-from-bracket"></i> Cerrar Sesi贸n
          </button>
        </nav>
      </div>
    </aside>



    <!-- Main content -->
    <main class="flex-1 bg-gray-100 min-h-screen pt-24 md:pt-24 ml-0 md:ml-64 px-6">
      <div class="max-w-6xl mx-auto">
        <h2 class="text-4xl font-extrabold text-center text-blue-800 mb-10"> Calendario de Vacunaci贸n para Mascotas
        </h2>
        <!-- Tabs -->
        <!-- Tabs -->
        <div class="flex justify-center gap-4 mb-8">
          <button onclick="showTab('cat')" id="tab-cat"
            class="transition-all duration-300 bg-purple-600 text-white px-5 py-2 rounded-full font-medium shadow hover:scale-105">
             Vacunas Para Gatos
          </button>
          <button onclick="showTab('dog')" id="tab-dog"
            class="transition-all duration-300 bg-white text-gray-800 px-5 py-2 rounded-full border font-medium shadow hover:scale-105">
             Vacunas Para Perros
          </button>
        </div>

        <!-- Tabla Gatos -->
        <div id="table-cat" class="bg-purple-50 p-6 rounded-2xl shadow-lg transition-all duration-300 animate-fade-in">
          <h3 class="text-2xl font-bold text-purple-800 mb-6 text-center">Vacunas Recomendadas Para Gatos</h3>
          <div class="overflow-x-auto">
            <table class="w-full bg-white rounded-lg shadow border text-sm">
              <thead class="bg-purple-200 text-purple-800 uppercase text-xs">
                <tr>
                  <th class="p-3 text-left">Tipo de vacuna</th>
                  <th class="p-3 text-left">Edad recomendada</th>
                  <th class="p-3 text-left">Dosis</th>
                  <th class="p-3 text-left">Frecuencia</th>
                  <th class="p-3 text-left">Comentarios</th>
                </tr>
              </thead>
              <tbody>
                <tr th:each="v : ${catVaccines}" class="hover:bg-purple-50 border-t">
                  <td class="p-3" th:text="${v.type}">Tipo</td>
                  <td class="p-3" th:text="${v.age}">Edad</td>
                  <td class="p-3" th:text="${v.doses}">Dosis</td>
                  <td class="p-3" th:text="${v.frequency}">Frecuencia</td>
                  <td class="p-3" th:text="${v.comments}">Comentarios</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <!-- Tabla Perros -->
        <div id="table-dog"
          class="hidden bg-yellow-50 p-6 rounded-2xl shadow-lg transition-all duration-300 animate-fade-in">
          <h3 class="text-2xl font-bold text-yellow-800 mb-6 text-center">Vacunas Recomendadas Para Perros</h3>
          <div class="overflow-x-auto">
            <table class="w-full bg-white rounded-lg shadow border text-sm">
              <thead class="bg-yellow-200 text-yellow-800 uppercase text-xs">
                <tr>
                  <th class="p-3 text-left">Tipo de vacuna</th>
                  <th class="p-3 text-left">Edad recomendada</th>
                  <th class="p-3 text-left">Dosis</th>
                  <th class="p-3 text-left">Frecuencia</th>
                  <th class="p-3 text-left">Comentarios</th>
                </tr>
              </thead>
              <tbody>
                <tr th:each="v : ${dogVaccines}" class="hover:bg-yellow-50 border-t">
                  <td class="p-3" th:text="${v.type}">Tipo</td>
                  <td class="p-3" th:text="${v.age}">Edad</td>
                  <td class="p-3" th:text="${v.doses}">Dosis</td>
                  <td class="p-3" th:text="${v.frequency}">Frecuencia</td>
                  <td class="p-3" th:text="${v.comments}">Comentarios</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

    </main>
  </div>

  <script>
    //OCULTAR SIDEBAR TIPO HAMBURGUESITA

    function toggleSidebar() {
      const sidebar = document.getElementById('sidebar');
      sidebar.classList.toggle('-translate-x-full');
    }

    // Cerrar sidebar al hacer clic en enlaces (solo en m贸vil)
    document.addEventListener('DOMContentLoaded', () => {
      const links = document.querySelectorAll('#sidebar a');
      links.forEach(link => {
        link.addEventListener('click', () => {
          if (window.innerWidth < 768) {
            document.getElementById('sidebar').classList.add('-translate-x-full');
          }
        });
      });

      // Cerrar si se hace clic fuera del sidebar en m贸vil
      document.addEventListener('click', (e) => {
        const sidebar = document.getElementById('sidebar');
        const toggleBtn = document.querySelector('button[onclick="toggleSidebar()"]');

        if (
          window.innerWidth < 768 &&
          !sidebar.contains(e.target) &&
          !toggleBtn.contains(e.target)
        ) {
          sidebar.classList.add('-translate-x-full');
        }
      });
    });
    function showTab(tab) {
      const cat = document.getElementById("table-cat");
      const dog = document.getElementById("table-dog");
      const tabCat = document.getElementById("tab-cat");
      const tabDog = document.getElementById("tab-dog");

      if (tab === 'cat') {
        cat.classList.remove("hidden");
        dog.classList.add("hidden");
        tabCat.classList.add("bg-purple-600", "text-white");
        tabDog.classList.remove("bg-yellow-400", "text-white");
      } else {
        dog.classList.remove("hidden");
        cat.classList.add("hidden");
        tabDog.classList.add("bg-yellow-400", "text-white");
        tabCat.classList.remove("bg-purple-600", "text-white");
      }
    }

    function logout() {
      // Eliminar cookie jwt (establece expiraci贸n en el pasado)
      document.cookie = "jwt=; path=/; expires=Thu, 01 Jan 1970 00:00:00 UTC; SameSite=Lax";

      // Redirigir al login o home
      window.location.href = "/";
    }
  </script>
</body>

</html>